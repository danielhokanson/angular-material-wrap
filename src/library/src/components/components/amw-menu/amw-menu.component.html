<div class="amw-menu-container">
  <!-- Custom trigger template -->
  @if (triggerTemplate()) {
    <ng-container
      [ngTemplateOutlet]="triggerTemplate()!"
      [matMenuTriggerFor]="menu"
      (menuOpened)="onMenuOpened()"
      (menuClosed)="onMenuClosed()">
    </ng-container>
  } @else {
    <!-- Default trigger button -->
    <amw-button
      [appearance]="triggerAppearance()"
      [icon]="triggerIcon()"
      [iconPosition]="triggerLabel() && triggerIcon() ? 'left' : 'left'"
      [class]="triggerButtonClasses()"
      [color]="triggerColor()"
      [disabled]="disabled()"
      [matMenuTriggerFor]="menu"
      (menuOpened)="onMenuOpened()"
      (menuClosed)="onMenuClosed()">
      @if (triggerLabel()) {
        <span>{{ triggerLabel() }}</span>
      }
    </amw-button>
  }

  <!-- Menu content -->
  <mat-menu
    #menu="matMenu"
    [class]="menuClasses()"
    [xPosition]="xPosition()"
    [yPosition]="yPosition()"
    [hasBackdrop]="hasBackdrop()">
    <ng-content></ng-content>
  </mat-menu>
</div>
