<div [class]="dialogClasses">
  <!-- Header -->
  @if (effectiveShowHeader()) {
    <div class="amw-dialog__header">
      @if (headerTemplate()) {
        <ng-container [ngTemplateOutlet]="headerTemplate()"></ng-container>
      } @else {
        <h2 class="amw-dialog__title">
          @if (effectiveType() === 'warning' || effectiveType() === 'alert') {
            <mat-icon class="dialog-icon">warning</mat-icon>
          }
          @if (effectiveType() === 'error') {
            <mat-icon class="dialog-icon">error</mat-icon>
          }
          @if (effectiveType() === 'success') {
            <mat-icon class="dialog-icon">check_circle</mat-icon>
          }
          @if (effectiveType() === 'info') {
            <mat-icon class="dialog-icon">info</mat-icon>
          }
          @if (effectiveType() === 'confirm') {
            <mat-icon class="dialog-icon">help</mat-icon>
          }
          @if (!effectiveType() || effectiveType() === 'standard') {
            <mat-icon class="dialog-icon">info</mat-icon>
          }
          {{ effectiveTitle() }}
        </h2>
        @if (effectiveShowCloseButton()) {
          <amw-button
            icon="close"
            class="amw-dialog__close"
            (click)="onCloseClick()"
            [disabled]="!effectiveClosable() || effectiveDisabled() || effectiveLoading()">
          </amw-button>
        }
      }
    </div>
  }

  <!-- Content -->
  <div class="amw-dialog__content">
    @if (contentTemplate()) {
      <ng-container [ngTemplateOutlet]="contentTemplate()"></ng-container>
    } @else {
      <div class="dialog-content">
        @switch (effectiveType()) {
          <!-- Success Message -->
          @case ('success') {
            <div class="success-message">
              <mat-icon class="success-icon">check_circle</mat-icon>
              <div>
                <p class="success-text" [innerHTML]="effectiveContent()"></p>
              </div>
            </div>
          }
          <!-- Alert Message -->
          @case ('alert') {
            <div class="alert-message">
              <mat-icon class="alert-icon">warning</mat-icon>
              <div>
                <p class="alert-text" [innerHTML]="effectiveContent()"></p>
              </div>
            </div>
          }
          <!-- Info Message -->
          @case ('info') {
            <div class="info-message">
              <mat-icon class="info-icon">info</mat-icon>
              <div>
                <p class="info-text" [innerHTML]="effectiveContent()"></p>
              </div>
            </div>
          }
          <!-- Warning Message -->
          @case ('warning') {
            <div class="alert-message">
              <mat-icon class="alert-icon">warning</mat-icon>
              <div>
                <p class="alert-text" [innerHTML]="effectiveContent()"></p>
              </div>
            </div>
          }
          <!-- Error Message -->
          @case ('error') {
            <div class="alert-message">
              <mat-icon class="alert-icon">error</mat-icon>
              <div>
                <p class="alert-text" [innerHTML]="effectiveContent()"></p>
              </div>
            </div>
          }
          <!-- Confirm Message -->
          @case ('confirm') {
            <div class="info-message">
              <mat-icon class="info-icon">help_outline</mat-icon>
              <div>
                <p class="info-text" [innerHTML]="effectiveContent()"></p>
              </div>
            </div>
          }
          <!-- Default/Standard Message -->
          @default {
            <div>
              <p [innerHTML]="effectiveContent()"></p>
            </div>
          }
        }
      </div>
    }

  </div>

  <!-- Footer -->
  @if (effectiveShowFooter() && effectiveActions().length > 0) {
    <div class="amw-dialog__footer">
      @if (footerTemplate()) {
        <ng-container [ngTemplateOutlet]="footerTemplate()"></ng-container>
      } @else {
        @for (action of effectiveActions(); track action; let i = $index) {
          <amw-button
            appearance="text"
            [icon]="action.icon"
            [iconPosition]="action.icon ? 'left' : 'left'"
            [color]="action.color || 'primary'"
            [disabled]="action.disabled || effectiveDisabled() || effectiveLoading()"
            (click)="onActionClick(action, i)"
            class="amw-dialog__action">
            {{ action.label }}
          </amw-button>
        }
      }
    </div>
  }

  <!-- Loading Overlay -->
  @if (effectiveLoading()) {
    <div class="amw-dialog__loading">
      <amw-progress-spinner [diameter]="40"></amw-progress-spinner>
      <p>Loading...</p>
    </div>
  }
</div>
