<div class="amw-range-slider"
  [class.amw-range-slider--disabled]="disabled()"
  [class.amw-range-slider--vertical]="vertical()">

  @if (label()) {
    <label class="amw-range-slider__label">{{ label() }}</label>
  }

  <div class="amw-range-slider__container">
    <!-- Signal Forms binding (scenario 3) - FormField directive manages disabled automatically -->
    @if (formField()) {
      <mat-slider
        class="amw-range-slider__slider"
        [min]="min()"
        [max]="max()"
        [step]="step()"
        [showTickMarks]="showTicks()"
        [color]="getMaterialColor()">
        <input matSliderStartThumb
          [formField]="formField()"
          (valueChange)="onStartValueChange($event)">
        <input matSliderEndThumb
          [ngModel]="endValue"
          (valueChange)="onEndValueChange($event)">
      </mat-slider>
    } @else {
      <!-- ngModel / Reactive Forms binding (scenarios 1 & 2) -->
      <mat-slider
        class="amw-range-slider__slider"
        [min]="min()"
        [max]="max()"
        [step]="step()"
        [disabled]="disabled()"
        [showTickMarks]="showTicks()"
        [color]="getMaterialColor()">
        <input matSliderStartThumb
          [ngModel]="startValue"
          (ngModelChange)="onStartValueChange($event)">
        <input matSliderEndThumb
          [ngModel]="endValue"
          (ngModelChange)="onEndValueChange($event)">
      </mat-slider>
    }
  </div>

  @if (errorMessage() || hasError()) {
    <div class="amw-range-slider__error">
      {{ errorMessage() }}
    </div>
  }

  @if (startThumbLabel() || endThumbLabel()) {
    <div class="amw-range-slider__labels">
      @if (startThumbLabel()) {
        <span class="amw-range-slider__thumb-label amw-range-slider__thumb-label--start">
          {{ startThumbLabel() }}
        </span>
      }
      @if (endThumbLabel()) {
        <span class="amw-range-slider__thumb-label amw-range-slider__thumb-label--end">
          {{ endThumbLabel() }}
        </span>
      }
    </div>
  }
</div>
