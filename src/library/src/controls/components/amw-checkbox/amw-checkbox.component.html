<div [class]="getCheckboxClasses()">
  <!-- Signal Forms binding (scenario 3) - Field directive manages disabled, required automatically -->
  @if (field()) {
    <mat-checkbox
      [field]="field()"
      [color]="color()"
      [indeterminate]="indeterminate()"
      [name]="name()"
      [tabIndex]="tabIndex()"
      [attr.aria-label]="ariaLabel()"
      [attr.aria-labelledby]="ariaLabelledby()"
      [attr.aria-describedby]="ariaDescribedby()"
      [disableRipple]="disableRipple()"
      [style.animation-duration]="animationDuration()"
      [style.animation-timing-function]="animationTimingFunction()"
      (indeterminateChange)="onIndeterminateChange($event)"
      (focus)="onFocus($event)"
      (blur)="onBlur($event)">
      <span [innerHTML]="label()"></span>
    </mat-checkbox>
  } @else {
    <!-- ngModel / Reactive Forms binding (scenarios 1 & 2) -->
    <mat-checkbox
      [color]="color()"
      [disabled]="disabled()"
      [required]="required()"
      [indeterminate]="indeterminate()"
      [checked]="checked()"
      [value]="value() ? 'true' : ''"
      [name]="name()"
      [tabIndex]="tabIndex()"
      [attr.aria-label]="ariaLabel()"
      [attr.aria-labelledby]="ariaLabelledby()"
      [attr.aria-describedby]="ariaDescribedby()"
      [attr.aria-required]="ariaRequired()"
      [attr.aria-invalid]="ariaInvalid()"
      [disableRipple]="disableRipple()"
      [style.animation-duration]="animationDuration()"
      [style.animation-timing-function]="animationTimingFunction()"
      (change)="onCheckboxChange($event)"
      (indeterminateChange)="onIndeterminateChange($event)"
      (focus)="onFocus($event)"
      (blur)="onBlur($event)">
      <span [innerHTML]="label()"></span>
    </mat-checkbox>
  }

  @if (hasError() && errorMessage()) {
    <div class="amw-checkbox__error">
      {{ errorMessage() }}
    </div>
  }
</div>
