<div class="data-table-validation">
  <amw-card>
    <ng-template #cardHeader>
      <h2>Data Table Validation Examples</h2>
      <p class="subtitle">Form validation with data table controls</p>
    </ng-template>
    
    <ng-template #cardContent>
      <form [formGroup]="dataTableForm" (ngSubmit)="onSubmit()">
        <div class="data-table-validation__form">
          <div class="data-table-validation__section">
            <h3>User Selection with Validation</h3>
            <p>Select users from the table below. Configure minimum and maximum selection limits.</p>
            
            <div class="data-table-validation__controls">
              <amw-input
                label="Minimum Selection"
                type="number"
                formControlName="minSelection"
                min="1"
                max="10"
                hint="Minimum number of users to select"
                class="data-table-validation__control">
              </amw-input>

              <amw-input
                label="Maximum Selection"
                type="number"
                formControlName="maxSelection"
                min="1"
                max="10"
                hint="Maximum number of users to select"
                class="data-table-validation__control">
              </amw-input>
            </div>

            <amw-data-table
              [value]="users"
              [columns]="columns"
              [actions]="actions"
              [selectable]="true"
              [multiSelect]="true"
              [filterable]="true"
              [config]="{ pageSize: 4 }"
              (selectionChange)="onSelectionChange($event)"
              (actionClick)="onActionClick($event)"
            ></amw-data-table>
            
            <div class="data-table-validation__selection-info" *ngIf="selectedUsers.length > 0">
              <h4>Selected Users ({{ selectedUsers.length }}):</h4>
              <div class="data-table-validation__user-chips">
                <mat-chip *ngFor="let user of selectedUsers" class="data-table-validation__user-chip">
                  {{ user.name }} - {{ user.department }}
                </mat-chip>
              </div>
            </div>
            
            <div class="data-table-validation__error" *ngIf="dataTableForm.get('selectedUsers')?.hasError('required')">
              Please select at least one user
            </div>
            <div class="data-table-validation__error" *ngIf="dataTableForm.get('selectedUsers')?.hasError('minSelection')">
              Please select at least {{ dataTableForm.get('selectedUsers')?.errors?.['minSelection']?.required }} users
            </div>
            <div class="data-table-validation__error" *ngIf="dataTableForm.get('selectedUsers')?.hasError('maxSelection')">
              Please select no more than {{ dataTableForm.get('selectedUsers')?.errors?.['maxSelection']?.max }} users
            </div>
          </div>
        </div>

        <div class="data-table-validation__actions">
          <amw-button variant="text" type="button" (click)="onReset()">Reset</amw-button>
          <amw-button variant="elevated" color="primary" type="submit" [disabled]="dataTableForm.invalid">
            Submit Selection
          </amw-button>
        </div>
      </form>
    </ng-template>
</amw-card>
</div>
