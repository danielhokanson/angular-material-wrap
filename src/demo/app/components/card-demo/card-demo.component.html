<div class="card-demo">
  <!-- Service Controls Section -->
  <div class="card-demo__service-section">
    <amw-card>
      <div slot="header">
        <h2>Card Service Demo</h2>
        <p class="subtitle">Manage cards using the CardService with filtering, sorting, and CRUD operations</p>
      </div>

      <div slot="content">
        <!-- Search and Filters -->
        <div class="card-demo__controls">
          <amw-input
            label="Search Cards"
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
            placeholder="Search by title, subtitle, or content"
            class="card-demo__search">
            <mat-icon matSuffix>search</mat-icon>
          </amw-input>

          <amw-select
            label="Variant"
            [(ngModel)]="selectedVariant"
            (selectionChange)="onFilterChange()"
            class="card-demo__filter">
            <mat-option value="">All Variants</mat-option>
            <mat-option value="elevated">Elevated</mat-option>
            <mat-option value="outlined">Outlined</mat-option>
            <mat-option value="filled">Filled</mat-option>
          </amw-select>

          <amw-select
            label="Size"
            [(ngModel)]="selectedSize"
            (selectionChange)="onFilterChange()"
            class="card-demo__filter">
            <mat-option value="">All Sizes</mat-option>
            <mat-option value="small">Small</mat-option>
            <mat-option value="medium">Medium</mat-option>
            <mat-option value="large">Large</mat-option>
          </amw-select>
        </div>

        <!-- Filter Checkboxes -->
        <div class="card-demo__checkboxes">
          <amw-checkbox [(ngModel)]="showClickableOnly" (change)="onFilterChange()">
            Clickable Only
          </amw-checkbox>
          <amw-checkbox [(ngModel)]="showWithImagesOnly" (change)="onFilterChange()">
            With Images Only
          </amw-checkbox>
          <amw-checkbox [(ngModel)]="showWithActionsOnly" (change)="onFilterChange()">
            With Actions Only
          </amw-checkbox>
        </div>

        <!-- Sort Controls -->
        <div class="card-demo__sort">
          <amw-select
            label="Sort By"
            [(ngModel)]="sortField"
            (selectionChange)="onSortChange()"
            class="card-demo__sort-field">
            <mat-option value="title">Title</mat-option>
            <mat-option value="createdAt">Created Date</mat-option>
            <mat-option value="updatedAt">Updated Date</mat-option>
          </amw-select>

          <amw-select
            label="Direction"
            [(ngModel)]="sortDirection"
            (selectionChange)="onSortChange()"
            class="card-demo__sort-field">
            <mat-option value="asc">Ascending</mat-option>
            <mat-option value="desc">Descending</mat-option>
          </amw-select>
        </div>

        <!-- Action Buttons -->
        <div class="card-demo__actions">
          <amw-button variant="elevated" color="primary" (click)="addSampleCard()" icon="add" iconPosition="left">Add Sample Card</amw-button>
          <amw-button variant="text" (click)="clearFilters()" icon="clear" iconPosition="left">Clear Filters</amw-button>
          <amw-button variant="text" (click)="getCardStatistics()" icon="analytics" iconPosition="left">Statistics</amw-button>
          <amw-button variant="text" (click)="exportCards()" icon="download" iconPosition="left">Export</amw-button>
        </div>
      </div>
    </amw-card>
  </div>

  <!-- Service Cards Display -->
  @if (filteredCards.length > 0) {
    <div class="card-demo__service-cards">
      <h3>Service-Managed Cards ({{ filteredCards.length }})</h3>
      <div class="card-demo__service-grid">
        @for (card of filteredCards; track card) {
          <amw-card
            [headerTitle]="card.title"
            [headerSubtitle]="card.subtitle || ''"
            [image]="card.image || ''"
            [imageAlt]="card.imageAlt || ''"
            [content]="card.content"
            [actions]="card.actions || []"
            [clickable]="card.clickable || false"
            [disabled]="card.disabled || false"
            [loading]="card.loading || false"
            [variant]="card.variant || 'elevated'"
            [size]="card.size || 'medium'"
            [elevation]="card.elevation || 1"
            [config]="card.config || {}"
            (cardClick)="onCardClick()"
            (actionClick)="onActionClick($event)"
            (headerClick)="onHeaderClick()"
            (imageClick)="onImageClick()"
            class="card-demo__service-card"
            >
            <ng-template #cardActions>
              <amw-button variant="icon" icon="content_copy" (click)="duplicateCard(card)" matTooltip="Duplicate"></amw-button>
              <amw-button variant="icon" icon="{{ card.loading ? 'pause' : 'play_arrow' }}" (click)="toggleCardLoading(card)" matTooltip="Toggle Loading"></amw-button>
              <amw-button variant="icon" icon="{{ card.disabled ? 'check_circle' : 'cancel' }}" (click)="toggleCardDisabled(card)" matTooltip="Toggle Disabled"></amw-button>
              <amw-button variant="icon" icon="delete" (click)="deleteCard(card)" matTooltip="Delete" color="warn"></amw-button>
            </ng-template>
          </amw-card>
        }
      </div>
    </div>
  }

  <!-- Static Card Variations -->
  <div class="card-demo__variations">
    <h3>Static Card Variations</h3>
    <div class="card-demo__grid">
      @for (variation of cardVariations; track variation) {
        <amw-card class="card-demo__card">
          <div slot="header">
            <h2>{{ variation.title }}</h2>
            <p class="subtitle">{{ variation.description }}</p>
          </div>
          <div slot="content">
            <div class="card-demo__example">
              <amw-card
                [headerTitle]="variation.card.headerTitle"
                [headerSubtitle]="variation.card.headerSubtitle"
                [headerIcon]="variation.card.headerIcon || ''"
                [image]="variation.card.image || ''"
                [imageAlt]="variation.card.imageAlt || ''"
                [content]="variation.card.content"
                [actions]="variation.card.actions || []"
                [clickable]="variation.card.clickable || false"
                [disabled]="variation.card.disabled || false"
                [loading]="variation.card.loading || false"
                [variant]="variation.card.variant || 'elevated'"
                [size]="variation.card.size || 'medium'"
                [elevation]="variation.card.elevation || 1"
                [config]="variation.card.config || {}"
                (cardClick)="onCardClick()"
                (actionClick)="onActionClick($event)"
                (headerClick)="onHeaderClick()"
                (imageClick)="onImageClick()"
              ></amw-card>
            </div>
          </div>
        </amw-card>
      }
    </div>
  </div>
</div>
