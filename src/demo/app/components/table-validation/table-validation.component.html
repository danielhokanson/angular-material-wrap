<amw-validation-doc
  componentName="amw-table"
  [validationForm]="validationForm"
  [validationInfo]="validationInfo">
  <ng-template #formContent>
    <!-- Add Row Form -->
    <div class="validation-section">
      <h3 class="validation-section__title">Add Row with Validation</h3>
      <div class="add-form">
        <amw-input
          label="Name"
          formControlName="name"
          placeholder="Enter name"
          [hasError]="(validationForm.get('name')?.invalid && validationForm.get('name')?.touched) ?? false"
          [errorMessage]="validationForm.get('name')?.hasError('required') ? 'Name is required' : 'Min 2 characters'">
        </amw-input>
        <amw-input
          label="Email"
          formControlName="email"
          placeholder="Enter email"
          [hasError]="(validationForm.get('email')?.invalid && validationForm.get('email')?.touched) ?? false"
          [errorMessage]="validationForm.get('email')?.hasError('required') ? 'Email is required' : 'Invalid email'">
        </amw-input>
        <amw-button
          type="button"
          appearance="filled"
          [disabled]="!validationForm.valid"
          (buttonClick)="addRow()">
          Add Row
        </amw-button>
      </div>
    </div>

    <!-- Filter -->
    <div class="validation-section">
      <h3 class="validation-section__title">Filter Table</h3>
      <amw-input
        label="Search"
        placeholder="Filter by name or email"
        [value]="filterValue()"
        (valueChange)="onFilterChange($event || '')">
      </amw-input>
    </div>

    <!-- Table -->
    <div class="validation-section">
      <h3 class="validation-section__title">Data Table</h3>
      <amw-table [dataSource]="filteredData" [displayedColumns]="displayedColumns">
      </amw-table>
      @if (filteredData.length === 0) {
        <p class="empty-message">No data matches your filter.</p>
      }
    </div>

    <!-- Selected Row -->
    @if (selectedRow()) {
      <div class="validation-section">
        <h3 class="validation-section__title">Selected Row</h3>
        <div class="selected-info">
          <p><strong>ID:</strong> {{ selectedRow()?.id }}</p>
          <p><strong>Name:</strong> {{ selectedRow()?.name }}</p>
          <p><strong>Email:</strong> {{ selectedRow()?.email }}</p>
          <p><strong>Status:</strong> {{ selectedRow()?.status }}</p>
        </div>
      </div>
    }
  </ng-template>
</amw-validation-doc>
