<div class="card-validation">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Card Selection Validation</mat-card-title>
      <mat-card-subtitle>Interactive card selection with validation</mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <form [formGroup]="cardForm" (ngSubmit)="onSubmit()">
        <div class="card-validation__form">
          <div class="card-validation__section">
            <h3>Select Your Plan</h3>
            <p>Choose your preferred plan(s) from the cards below. Configure minimum and maximum selection limits.</p>
            
            <div class="card-validation__controls">
              <mat-form-field appearance="outline" class="card-validation__control">
                <mat-label>Minimum Selection</mat-label>
                <input matInput type="number" formControlName="minSelection" min="1" max="3">
                <mat-hint>Minimum number of cards to select</mat-hint>
              </mat-form-field>
              
              <mat-form-field appearance="outline" class="card-validation__control">
                <mat-label>Maximum Selection</mat-label>
                <input matInput type="number" formControlName="maxSelection" min="1" max="3">
                <mat-hint>Maximum number of cards to select</mat-hint>
              </mat-form-field>
            </div>
            
            <div class="card-validation__cards">
              <amw-card
                *ngFor="let card of cardOptions"
                [headerTitle]="card.title"
                [headerSubtitle]="card.subtitle"
                [content]="card.price + ' per month'"
                [clickable]="true"
                [config]="{ 
                  class: isCardSelected(card.id) ? 'selected-card' : '',
                  style: isCardSelected(card.id) ? { 'border': '2px solid var(--mdc-theme-primary)' } : {}
                }"
                (cardClick)="onCardClick(card)"
                class="card-validation__card"
              >
                <ng-template #cardContent>
                  <div class="card-validation__card-content">
                    <h4>{{ card.price }}</h4>
                    <ul>
                      <li *ngFor="let feature of card.features">{{ feature }}</li>
                    </ul>
                  </div>
                </ng-template>
              </amw-card>
            </div>
            
            <div class="card-validation__selection-info" *ngIf="selectedCards.length > 0">
              <h4>Selected Plans ({{ selectedCards.length }}):</h4>
              <div class="card-validation__selected-chips">
                <mat-chip *ngFor="let card of selectedCardsList" class="card-validation__selected-chip">
                  {{ card.title }} - {{ card.price }}
                </mat-chip>
              </div>
            </div>
            
            <div class="card-validation__error" *ngIf="cardForm.get('selectedCards')?.hasError('required')">
              Please select at least one card
            </div>
            <div class="card-validation__error" *ngIf="cardForm.get('selectedCards')?.hasError('minSelection')">
              Please select at least {{ cardForm.get('selectedCards')?.errors?.['minSelection']?.required }} cards
            </div>
            <div class="card-validation__error" *ngIf="cardForm.get('selectedCards')?.hasError('maxSelection')">
              Please select no more than {{ cardForm.get('selectedCards')?.errors?.['maxSelection']?.max }} cards
            </div>
          </div>
        </div>

        <div class="card-validation__actions">
          <button mat-button type="button" (click)="onReset()">Reset</button>
          <button mat-raised-button color="primary" type="submit" [disabled]="cardForm.invalid">
            Submit Selection
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>


