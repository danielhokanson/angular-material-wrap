<amw-validation-doc
  componentName="Theme Configuration"
  [validationForm]="validationForm"
  [validationInfo]="validationInfo">
  <ng-template #formContent>
    <div class="theme-builder">
      <!-- Configuration Panel -->
      <amw-card class="validation-card config-panel">
        <ng-template #cardHeader>
          <h2>
            <amw-icon name="palette"></amw-icon>
            Theme Configuration
          </h2>
          <p class="subtitle">Customize your Material Design theme</p>
        </ng-template>
        <ng-template #cardContent>
          <!-- Color Configuration -->
          <div class="config-section">
            <h4>
              <amw-icon name="color_lens"></amw-icon>
              Color Palette
            </h4>

            <div class="color-field">
              <label>Primary Color</label>
              <amw-color-picker
                formControlName="primaryColor"
                [showPalette]="true"
                [showCustom]="true">
              </amw-color-picker>
            </div>
            @if (getFieldError('primaryColor')) {
              <div class="field-error">{{ getFieldError('primaryColor') }}</div>
            }

            <div class="color-field">
              <label>Accent Color</label>
              <amw-color-picker
                formControlName="accentColor"
                [showPalette]="true"
                [showCustom]="true">
              </amw-color-picker>
            </div>
            @if (getFieldError('accentColor')) {
              <div class="field-error">{{ getFieldError('accentColor') }}</div>
            }

            <div class="color-field">
              <label>Warn Color</label>
              <amw-color-picker
                formControlName="warnColor"
                [showPalette]="true"
                [showCustom]="true">
              </amw-color-picker>
            </div>
            @if (getFieldError('warnColor')) {
              <div class="field-error">{{ getFieldError('warnColor') }}</div>
            }
          </div>

          <!-- Mode Configuration -->
          <div class="config-section">
            <h4>
              <amw-icon [name]="getModeIcon()"></amw-icon>
              Theme Mode
            </h4>

            <amw-radio-group formControlName="mode" class="mode-radio-group">
              <amw-radio value="light">
                <amw-icon name="light_mode"></amw-icon>
                Light Mode
              </amw-radio>
              <amw-radio value="dark">
                <amw-icon name="dark_mode"></amw-icon>
                Dark Mode
              </amw-radio>
            </amw-radio-group>
          </div>

          <!-- Density Configuration -->
          <div class="config-section">
            <h4>
              <amw-icon name="height"></amw-icon>
              Component Density
            </h4>

            <amw-select
              class="full-width"
              label="Density Level"
              formControlName="density"
              [options]="densityOptions">
            </amw-select>
          </div>

          <!-- Typography Configuration -->
          <div class="config-section">
            <h4>
              <amw-icon name="text_fields"></amw-icon>
              Typography
            </h4>

            <amw-select
              class="full-width"
              label="Font Family"
              formControlName="typography"
              [options]="typographyOptions">
            </amw-select>
          </div>

          <!-- Action Buttons -->
          <div class="config-actions">
            <amw-button appearance="elevated"
              color="primary"
              (click)="applyTheme()"
              [disabled]="!isFormValid()" icon="check" iconPosition="left">Apply Theme</amw-button>

            <amw-button appearance="elevated"
              (click)="resetTheme()" icon="refresh" iconPosition="left">Reset to Default</amw-button>

            <amw-button appearance="elevated"
              (click)="exportTheme()"
              [disabled]="!isFormValid()" icon="download" iconPosition="left">Export Config</amw-button>
          </div>

          @if (!isFormValid()) {
            <div class="validation-warning">
              <amw-icon name="warning"></amw-icon>
              <span>Please fix validation errors before applying theme</span>
            </div>
          }
        </ng-template>
      </amw-card>

      <!-- Preview Panel -->
      <amw-card class="validation-card preview-panel" [ngStyle]="getPreviewStyles()">
        <ng-template #cardHeader>
          <h2>
            <amw-icon name="visibility"></amw-icon>
            Preview
          </h2>
          <p class="subtitle">See your theme in action</p>
        </ng-template>
        <ng-template #cardContent>
          @if (previewEnabled()) {
            <div class="preview-content">
              <!-- Color Swatches -->
              <div class="color-swatches">
                <div class="swatch swatch--primary">
                  <div class="swatch-color"></div>
                  <span>Primary</span>
                </div>
                <div class="swatch swatch--accent">
                  <div class="swatch-color"></div>
                  <span>Accent</span>
                </div>
                <div class="swatch swatch--warn">
                  <div class="swatch-color"></div>
                  <span>Warn</span>
                </div>
              </div>

              <!-- Component Samples -->
              <div class="component-samples">
                <h5>Buttons</h5>
                <div class="button-group">
                  <amw-button appearance="elevated" class="btn-primary">Primary</amw-button>
                  <amw-button appearance="elevated" class="btn-accent">Accent</amw-button>
                  <amw-button appearance="elevated" class="btn-warn">Warn</amw-button>
                </div>

                <h5>Text Styles</h5>
                <div class="text-samples">
                  <h6 class="sample-headline">Headline Text</h6>
                  <p class="sample-body">Body text with current theme applied.</p>
                  <span class="sample-caption">Caption text example</span>
                </div>

                <h5>Surface & Background</h5>
                <div class="surface-sample">
                  <div class="sample-card">
                    <div class="sample-card-header">Card Header</div>
                    <div class="sample-card-content">
                      This is a card with the current surface color applied.
                      The text adapts to the background for proper contrast.
                    </div>
                  </div>
                </div>

                <h5>Current Configuration</h5>
                <div class="config-summary">
                  <div class="summary-row">
                    <span class="label">Mode:</span>
                    <span class="value">{{ currentTheme().mode }}</span>
                  </div>
                  <div class="summary-row">
                    <span class="label">Density:</span>
                    <span class="value">{{ currentTheme().density }}</span>
                  </div>
                  <div class="summary-row">
                    <span class="label">Typography:</span>
                    <span class="value">{{ currentTheme().typography }}</span>
                  </div>
                </div>
              </div>
            </div>
          } @else {
            <div class="preview-disabled">
              <amw-icon name="visibility_off"></amw-icon>
              <p>Preview disabled</p>
              <amw-button appearance="text" (click)="togglePreview()">Enable Preview</amw-button>
            </div>
          }
        </ng-template>
      </amw-card>
    </div>
  </ng-template>
</amw-validation-doc>
