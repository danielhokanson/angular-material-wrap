<div class="code-section">
  <h3>Code Examples</h3>
  <p>Interactive examples with live previews. The code is editable for reference, and working examples are shown alongside.</p>

  <mat-accordion class="code-examples-accordion">
    <!-- Basic File Input -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Basic File Input
        </mat-panel-title>
        <mat-panel-description>Simple file input with default configuration</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <button mat-icon-button (click)="resetCode('basic')" title="Reset to original">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
          <textarea
            [(ngModel)]="editableCode.basic"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-file-input
              [(selectedFiles)]="basicFiles"
              (filesChange)="onFilesChange($event)"
              (fileSelect)="onFileSelect($event)"
              (fileRemove)="onFileRemove($event)">
            </amw-file-input>
            <p *ngIf="basicFiles.length > 0">Selected files: {{ basicFiles.length }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Configured File Input -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Configured File Input
        </mat-panel-title>
        <mat-panel-description>File input with custom configuration and restrictions</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <button mat-icon-button (click)="resetCode('configured')" title="Reset to original">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
          <textarea
            [(ngModel)]="editableCode.configured"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-file-input
              [multiple]="true"
              [accept]="'image/*'"
              [maxSize]="5 * 1024 * 1024"
              [maxFiles]="5"
              [showPreview]="true"
              [allowDragDrop]="true"
              [selectedFiles]="imageFiles"
              (filesChange)="onImageFilesChange($event)"
              placeholder="Upload images (max 5MB each)"
              buttonText="Choose Images">
            </amw-file-input>
            <p *ngIf="imageFiles.length > 0">Selected images: {{ imageFiles.length }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Reactive Form Integration -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Reactive Form Integration
        </mat-panel-title>
        <mat-panel-description>File input integrated with Angular reactive forms</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <button mat-icon-button (click)="resetCode('formControl')" title="Reset to original">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
          <textarea
            [(ngModel)]="editableCode.formControl"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <form [formGroup]="fileForm">
              <amw-file-input
                formControlName="profileImage"
                [accept]="'image/*'"
                [maxSize]="5 * 1024 * 1024"
                [hasError]="!!(fileForm.get('profileImage')?.invalid && fileForm.get('profileImage')?.touched)">
                Profile Image
              </amw-file-input>
            </form>
            <p>Form valid: {{ fileForm.valid ? 'Yes' : 'No' }}</p>
            <p *ngIf="fileForm.get('profileImage')?.hasError('minFiles')">At least one file is required</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- With Custom Validation -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          With Custom Validation
        </mat-panel-title>
        <mat-panel-description>File input with custom validation and error handling</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <button mat-icon-button (click)="resetCode('validation')" title="Reset to original">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
          <textarea
            [(ngModel)]="editableCode.validation"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <form [formGroup]="fileForm">
              <amw-file-input
                formControlName="documents"
                [accept]="'.pdf'"
                [maxSize]="10 * 1024 * 1024"
                [hasError]="!!(fileForm.get('documents')?.invalid && fileForm.get('documents')?.touched)"
                [errorMessage]="getErrorMessage('documents')">
                Upload Documents
              </amw-file-input>
            </form>
            <p>Form valid: {{ fileForm.valid ? 'Yes' : 'No' }}</p>
            <p *ngIf="fileForm.get('documents')?.errors" class="error-text">{{ getErrorMessage('documents') }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Drag & Drop Configuration -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Drag & Drop Configuration
        </mat-panel-title>
        <mat-panel-description>File input with drag and drop functionality</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <button mat-icon-button (click)="resetCode('dragDrop')" title="Reset to original">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
          <textarea
            [(ngModel)]="editableCode.dragDrop"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-file-input
              [allowDragDrop]="true"
              [multiple]="true"
              [accept]="'*/*'"
              [selectedFiles]="dragDropFiles"
              (filesChange)="onFilesChange($event)"
              placeholder="Drag and drop files here or click to browse"
              dropText="Drop files here to upload">
            </amw-file-input>
            <p *ngIf="dragDropFiles.length > 0">Dropped files: {{ dragDropFiles.length }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- File Type Restrictions -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          File Type Restrictions
        </mat-panel-title>
        <mat-panel-description>Different file type restrictions and MIME types</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <button mat-icon-button (click)="resetCode('fileTypes')" title="Reset to original">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
          <textarea
            [(ngModel)]="editableCode.fileTypes"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <!-- Images only -->
            <amw-file-input [accept]="'image/*'" [selectedFiles]="imageOnlyFiles">Images</amw-file-input>
            <p *ngIf="imageOnlyFiles.length > 0">Images: {{ imageOnlyFiles.length }}</p>

            <!-- Specific extensions -->
            <amw-file-input [accept]="'.jpg,.jpeg,.png,.gif'" [selectedFiles]="specificImageFiles">Specific Images</amw-file-input>
            <p *ngIf="specificImageFiles.length > 0">Specific images: {{ specificImageFiles.length }}</p>

            <!-- PDF only -->
            <amw-file-input [accept]="'application/pdf'" [selectedFiles]="pdfFiles">PDF Files</amw-file-input>
            <p *ngIf="pdfFiles.length > 0">PDFs: {{ pdfFiles.length }}</p>

            <!-- Multiple types -->
            <amw-file-input [accept]="'image/*,application/pdf'" [selectedFiles]="mixedFiles">Images & PDFs</amw-file-input>
            <p *ngIf="mixedFiles.length > 0">Mixed files: {{ mixedFiles.length }}</p>

            <!-- Video files -->
            <amw-file-input [accept]="'video/*'" [selectedFiles]="videoFiles">Video Files</amw-file-input>
            <p *ngIf="videoFiles.length > 0">Videos: {{ videoFiles.length }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>
