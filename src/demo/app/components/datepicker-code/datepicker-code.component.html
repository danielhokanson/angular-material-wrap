<div class="code-section">
  <h3>Code Examples</h3>
  <p>Interactive examples with live previews. The code is editable for reference, and working examples are shown alongside.</p>

  <mat-accordion class="code-examples-accordion">
    <!-- Basic Datepicker -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Basic Datepicker
        </mat-panel-title>
        <mat-panel-description>A simple datepicker with default settings</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('basic')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.basic"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-datepicker
              label="Select Date"
              placeholder="Choose a date..."
              [(ngModel)]="selectedDate">
            </amw-datepicker>
            <p>Selected date: {{ selectedDate | date }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- With Min/Max Dates -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Datepicker with Min/Max Dates
        </mat-panel-title>
        <mat-panel-description>Datepicker with date range restrictions</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('withMinMax')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.withMinMax"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-datepicker
              label="Birth Date"
              placeholder="Select your birth date..."
              [min]="minDate"
              [max]="maxDate"
              [(ngModel)]="birthDate">
            </amw-datepicker>
            <p>Selected date: {{ birthDate | date }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- With Validation -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Datepicker with Validation
        </mat-panel-title>
        <mat-panel-description>Datepicker with required validation</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('withValidation')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.withValidation"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <form [formGroup]="dateForm">
              <amw-datepicker
                formControlName="startDate"
                label="Start Date *"
                placeholder="Select start date..."
                [required]="true"
                [min]="currentDate"
                appearance="outline"
                [errorMessage]="dateForm.get('startDate')?.hasError('required') ? 'Start date is required' : ''">
              </amw-datepicker>
            </form>
            <p>Form valid: {{ dateForm.valid ? 'Yes' : 'No' }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Different Formats -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Different Date Formats
        </mat-panel-title>
        <mat-panel-description>Datepickers with various display formats</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('differentFormats')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.differentFormats"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-datepicker
              label="Short Date"
              placeholder="MM/DD/YYYY"
              [(ngModel)]="shortDate"
              format="short">
            </amw-datepicker>
            <p>Short format: {{ shortDate | date:'short' }}</p>

            <amw-datepicker
              label="Long Date"
              placeholder="Month Day, Year"
              [(ngModel)]="longDate"
              format="long">
            </amw-datepicker>
            <p>Long format: {{ longDate | date:'long' }}</p>

            <amw-datepicker
              label="Custom Format"
              placeholder="DD-MM-YYYY"
              [(ngModel)]="customDate"
              format="dd-MM-yyyy">
            </amw-datepicker>
            <p>Custom format: {{ customDate | date:'dd-MM-yyyy' }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Disabled State -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Disabled Datepicker
        </mat-panel-title>
        <mat-panel-description>Datepicker in disabled state</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('disabled')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.disabled"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-datepicker
              label="Disabled Datepicker"
              placeholder="This is disabled..."
              [(ngModel)]="selectedDate"
              [disabled]="true">
            </amw-datepicker>
            <p>Selected date: {{ selectedDate | date }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Reactive Form Integration -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Reactive Form Integration
        </mat-panel-title>
        <mat-panel-description>Using datepickers with Angular reactive forms</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('reactiveForm')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.reactiveForm"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <form [formGroup]="dateForm">
              <amw-datepicker
                formControlName="startDate"
                label="Start Date *"
                placeholder="Select start date..."
                [min]="minDate"
                [required]="true">
              </amw-datepicker>
            </form>
            <p>Form valid: {{ dateForm.valid ? 'Yes' : 'No' }}</p>
            <p>Form value: {{ dateForm.get('startDate')?.value | date }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- With Events -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Datepicker with Events
        </mat-panel-title>
        <mat-panel-description>Datepickers with event handling</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('withEvents')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.withEvents"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <amw-datepicker
              label="Event Date"
              placeholder="Select event date..."
              [(ngModel)]="eventDate"
              (dateChange)="onDateChange($event)"
              (opened)="onDatepickerOpened()"
              (closed)="onDatepickerClosed()">
            </amw-datepicker>
            <p>Selected date: {{ eventDate | date }}</p>
            <p class="info-note">
              <mat-icon>info</mat-icon>
              Open your browser console to see event logs
            </p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Booking Form Example -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>code</mat-icon>
          Booking Form Example
        </mat-panel-title>
        <mat-panel-description>Complete booking form with multiple datepickers</mat-panel-description>
      </mat-expansion-panel-header>
      <div class="example-container">
        <div class="code-panel">
          <div class="code-header">
            <h4>Code</h4>
            <amw-button variant="icon" icon="refresh" (click)="resetCode('bookingForm')" title="Reset to original"></amw-button>
          </div>
          <textarea
            [(ngModel)]="editableCode.bookingForm"
            class="code-editor"
            spellcheck="false"></textarea>
        </div>
        <div class="preview-panel">
          <h4>Preview</h4>
          <div class="preview-content">
            <form [formGroup]="bookingForm" class="booking-form">
              <h3>Event Booking</h3>

              <amw-datepicker
                formControlName="eventDate"
                label="Event Date *"
                placeholder="Select event date..."
                [min]="currentDate"
                [required]="true">
              </amw-datepicker>

              <amw-datepicker
                formControlName="startTime"
                label="Start Time *"
                placeholder="Select start time..."
                [min]="currentDate"
                [required]="true">
              </amw-datepicker>

              <amw-datepicker
                formControlName="endTime"
                label="End Time *"
                placeholder="Select end time..."
                [min]="currentDate"
                [required]="true">
              </amw-datepicker>

              <amw-datepicker
                formControlName="setupDate"
                label="Setup Date"
                placeholder="Select setup date..."
                [min]="currentDate">
              </amw-datepicker>

              <amw-button variant="elevated"
                color="primary"
                [disabled]="bookingForm.invalid">
                Book Event
              </amw-button>
            </form>
            <p>Form valid: {{ bookingForm.valid ? 'Yes' : 'No' }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>
