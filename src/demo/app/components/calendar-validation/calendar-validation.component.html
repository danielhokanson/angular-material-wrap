<div class="validation-section">
  <h3>Form Validation Examples</h3>
  <p>Interactive forms demonstrating date picker validation, date range constraints, and error handling.</p>

  <div class="validation-forms">
    <!-- Basic Date Picker Form -->
    <amw-card class="validation-card">
      <div slot="header">
        <h2>
          <mat-icon>event</mat-icon>
          Basic Date Picker
        </h2>
        <p class="subtitle">Simple date selection with required validation</p>
      </div>
      <div slot="content">
        <form [formGroup]="basicDateForm" (ngSubmit)="submitBasicDate()">
          <amw-datepicker
            class="full-width"
            label="Birth Date"
            formControlName="birthDate"
            [max]="today"
            placeholder="MM/DD/YYYY"
            hint="Select a date in the past">
          </amw-datepicker>
          @if (basicDateForm.get('birthDate')?.invalid && basicDateForm.get('birthDate')?.touched) {
            <div class="field-error">{{ getErrorMessage(basicDateForm, 'birthDate') }}</div>
          }

          <div class="form-actions">
            <amw-button variant="elevated"
              color="primary"
              type="submit"
              [disabled]="!isBasicDateValid()" icon="check" iconPosition="left">Submit</amw-button>
          </div>
        </form>

        <div class="validation-status">
          @if (isBasicDateValid()) {
            <div class="status-message status-message--success">
              <mat-icon>check_circle</mat-icon>
              <span>Valid: Date selected</span>
            </div>
          } @else {
            <div class="status-message status-message--warning">
              <mat-icon>warning</mat-icon>
              <span>Select a birth date to continue</span>
            </div>
          }
        </div>
      </div>
    </amw-card>

    <!-- Date Range Form -->
    <amw-card class="validation-card">
      <div slot="header">
        <h2>
          <mat-icon>date_range</mat-icon>
          Date Range Selection
        </h2>
        <p class="subtitle">Start and end date with range validation</p>
      </div>
      <div slot="content">
        <form [formGroup]="dateRangeForm" (ngSubmit)="submitDateRange()">
          <div class="date-range-fields">
            <amw-datepicker
              class="date-field"
              label="Start Date"
              formControlName="startDate"
              [min]="minDate"
              [max]="maxDate"
              placeholder="MM/DD/YYYY">
            </amw-datepicker>
            @if (dateRangeForm.get('startDate')?.invalid && dateRangeForm.get('startDate')?.touched) {
              <div class="field-error">{{ getErrorMessage(dateRangeForm, 'startDate') }}</div>
            }

            <amw-datepicker
              class="date-field"
              label="End Date"
              formControlName="endDate"
              [min]="minDate"
              [max]="maxDate"
              placeholder="MM/DD/YYYY">
            </amw-datepicker>
            @if (dateRangeForm.get('endDate')?.invalid && dateRangeForm.get('endDate')?.touched) {
              <div class="field-error">{{ getErrorMessage(dateRangeForm, 'endDate') }}</div>
            }
          </div>

          <!-- Form-level validation using AMW -->
          <amw-form-validation
            [form]="dateRangeForm"
            [errors]="dateRangeValidation"
            displayMode="inline"
            position="bottom">
          </amw-form-validation>

          <div class="form-actions">
            <amw-button variant="elevated"
              color="primary"
              type="submit"
              [disabled]="!isDateRangeValid()" icon="check" iconPosition="left">Submit Range</amw-button>
          </div>
        </form>

        <div class="validation-status">
          @if (isDateRangeValid()) {
            <div class="status-message status-message--success">
              <mat-icon>check_circle</mat-icon>
              <span>Valid: Date range selected</span>
            </div>
          }
        </div>
      </div>
    </amw-card>

    <!-- Event Booking Form -->
    <amw-card class="validation-card">
      <div slot="header">
        <h2>
          <mat-icon>event_available</mat-icon>
          Event Booking
        </h2>
        <p class="subtitle">Complex form with multiple date constraints</p>
      </div>
      <div slot="content">
        <form [formGroup]="eventBookingForm" (ngSubmit)="submitEventBooking()">
          <amw-input
            class="full-width"
            label="Event Name"
            formControlName="eventName"
            placeholder="Enter event name">
          </amw-input>
          @if (eventBookingForm.get('eventName')?.invalid && eventBookingForm.get('eventName')?.touched) {
            <div class="field-error">{{ getErrorMessage(eventBookingForm, 'eventName') }}</div>
          }

          <amw-datepicker
            class="full-width"
            label="Event Date"
            formControlName="eventDate"
            [min]="minDate"
            placeholder="MM/DD/YYYY"
            hint="Weekends only">
          </amw-datepicker>
          @if (eventBookingForm.get('eventDate')?.invalid && eventBookingForm.get('eventDate')?.touched) {
            <div class="field-error">{{ getErrorMessage(eventBookingForm, 'eventDate') }}</div>
          }

          <amw-datepicker
            class="full-width"
            label="Registration Deadline"
            formControlName="registrationDeadline"
            [min]="minDate"
            placeholder="MM/DD/YYYY"
            hint="Weekdays only, before event date">
          </amw-datepicker>
          @if (eventBookingForm.get('registrationDeadline')?.invalid && eventBookingForm.get('registrationDeadline')?.touched) {
            <div class="field-error">{{ getErrorMessage(eventBookingForm, 'registrationDeadline') }}</div>
          }

          <!-- Form-level validation using AMW -->
          <amw-form-validation
            [form]="eventBookingForm"
            [errors]="eventBookingValidation"
            displayMode="inline"
            position="bottom">
          </amw-form-validation>

          <div class="form-actions">
            <amw-button variant="elevated"
              color="primary"
              type="submit"
              [disabled]="!isEventBookingValid()" icon="send" iconPosition="left">Book Event</amw-button>
          </div>
        </form>

        <div class="validation-status">
          @if (isEventBookingValid()) {
            <div class="status-message status-message--success">
              <mat-icon>check_circle</mat-icon>
              <span>Valid: Event booking ready to submit</span>
            </div>
          }
        </div>
      </div>
    </amw-card>

    <!-- Form Summary -->
    <amw-card class="validation-card validation-card--summary">
      <div slot="content">
        <div class="form-summary">
          <h4>Validation Summary</h4>
          <div class="summary-items">
            <div class="summary-item">
              <mat-icon [class.valid]="isBasicDateValid()" [class.invalid]="!isBasicDateValid()">
                {{ isBasicDateValid() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span>Basic Date Picker</span>
            </div>
            <div class="summary-item">
              <mat-icon [class.valid]="isDateRangeValid()" [class.invalid]="!isDateRangeValid()">
                {{ isDateRangeValid() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span>Date Range Selection</span>
            </div>
            <div class="summary-item">
              <mat-icon [class.valid]="isEventBookingValid()" [class.invalid]="!isEventBookingValid()">
                {{ isEventBookingValid() ? 'check_circle' : 'cancel' }}
              </mat-icon>
              <span>Event Booking</span>
            </div>
          </div>
        </div>

        @if (!isBasicDateValid() || !isDateRangeValid() || !isEventBookingValid()) {
          <div class="summary-message">
            <mat-icon>info</mat-icon>
            <span>Complete all forms to see validation in action</span>
          </div>
        } @else {
          <div class="summary-message summary-message--success">
            <mat-icon>check_circle</mat-icon>
            <span>All forms are valid!</span>
          </div>
        }
      </div>
    </amw-card>
  </div>
</div>
