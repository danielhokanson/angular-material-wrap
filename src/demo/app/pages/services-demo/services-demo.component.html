<div class="services-demo">
  <div class="services-header">
    <h1>Angular Services</h1>
    <p>Global services and utilities for application-wide functionality</p>
  </div>

  <div class="services-content">
    <div class="services-main">
      <amw-card class="service-demo">
        <ng-template #cardHeader>
          <h2>{{ selectedService.name }}</h2>
          <p class="subtitle">Interactive demo and documentation</p>
        </ng-template>
        <ng-template #cardContent>
          <amw-tabs [(selectedIndex)]="selectedTab" class="service-tabs">
            <amw-tab label="Demo" icon="play_arrow">
              @switch (selectedService.id) {
                @case ('messaging') {
                  <div class="demo-content">
                    <h3>Messaging Service Demo</h3>
                    <p>This service provides centralized messaging functionality.</p>
                    <div class="demo-section">
                      <h4>Send Message</h4>
                      <amw-input
                        label="Title"
                        name="messageTitle"
                        [(ngModel)]="messageTitle"
                        placeholder="Enter message title">
                      </amw-input>
                      <amw-input
                        label="Content"
                        name="messageContent"
                        [(ngModel)]="messageContent"
                        placeholder="Enter message content">
                      </amw-input>
                      <div class="button-group">
                        <amw-button appearance="elevated" color="primary" (click)="sendMessage()" icon="info" iconPosition="left">Info</amw-button>
                        <amw-button appearance="elevated" color="accent" (click)="sendSuccessMessage()" icon="check_circle" iconPosition="left">Success</amw-button>
                        <amw-button appearance="elevated" color="warn" (click)="sendWarningMessage()" icon="warning" iconPosition="left">Warning</amw-button>
                        <amw-button appearance="elevated" color="warn" (click)="sendErrorMessage()" icon="error" iconPosition="left">Error</amw-button>
                      </div>
                    </div>
                    <div class="demo-section">
                      <h4>Message History</h4>
                      <div class="message-list">
                        @for (message of messages; track message) {
                          <div class="message-item" [class]="'message-' + message.type">
                            <div class="message-header">
                              <amw-icon [name]="getMessageIcon(message.type)"></amw-icon>
                              <span class="message-title">{{ message.title }}</span>
                              @if (message.dismissible) {
                                <amw-button icon="close" (click)="removeMessage(message.id)"></amw-button>
                              }
                            </div>
                            <div class="message-content">{{ message.content }}</div>
                            <div class="message-time">{{ message.timestamp | date:'short' }}</div>
                          </div>
                        }
                      </div>
                      <amw-button appearance="text" color="warn" (click)="clearMessages()" icon="clear" iconPosition="left">Clear Messages</amw-button>
                    </div>
                  </div>
                }
                @case ('loading') {
                  <div class="demo-content">
                    <h3>Loading Service Demo</h3>
                    <p>This service manages loading states throughout the application.</p>
                    <div class="demo-section">
                      <h4>Loading States</h4>
                      <amw-button appearance="elevated" color="primary" (click)="startLoading()" [disabled]="loadingState.isLoading" icon="play_arrow" iconPosition="left">Start Loading</amw-button>
                      <amw-button appearance="text" (click)="stopLoading()" [disabled]="!loadingState.isLoading" icon="stop" iconPosition="left">Stop Loading</amw-button>
                      @if (loadingState.isLoading) {
                        <div class="loading-demo">
                          <div class="spinner"></div>
                          <p>Loading in progress...</p>
                        </div>
                      }
                    </div>
                  </div>
                }
                @case ('notification') {
                  <div class="demo-content">
                    <h3>Notification Service Demo</h3>
                    <p>This service provides various types of notifications to users.</p>
                    <div class="demo-section">
                      <h4>Notification Types</h4>
                      <amw-button appearance="elevated" color="primary" (click)="showSuccessNotification()" icon="check_circle" iconPosition="left">Success</amw-button>
                      <amw-button appearance="elevated" color="warn" (click)="showErrorNotification()" icon="error" iconPosition="left">Error</amw-button>
                      <amw-button appearance="elevated" color="accent" (click)="showInfoNotification()" icon="info" iconPosition="left">Info</amw-button>
                    </div>
                  </div>
                }
              }
            </amw-tab>

            <amw-tab label="Code" icon="code">
              <div class="code-content">
                @switch (selectedService.id) {
                  @case ('messaging') {
                    <div class="messaging-code-examples">
                      <h3>Messaging Service Code Examples</h3>
                      <p>Interactive examples showing different messaging service configurations.</p>

                      <div class="code-example">
                        <h4>Basic Usage</h4>
                        <pre><code>{{ messagingServiceCodeExamples.basic }}</code></pre>
                        <div class="preview">
                          <amw-button appearance="elevated" color="primary" (click)="sendMessage()" icon="message" iconPosition="left">Show Info Message</amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Message Types</h4>
                        <pre><code>{{ messagingServiceCodeExamples.types }}</code></pre>
                        <div class="preview">
                          <div class="button-group">
                            <amw-button appearance="text" (click)="messagingService.info('Info', 'Information message')" icon="info" iconPosition="left">Info</amw-button>
                            <amw-button appearance="text" (click)="messagingService.success('Success', 'Success message')" icon="check_circle" iconPosition="left">Success</amw-button>
                            <amw-button appearance="text" (click)="messagingService.warning('Warning', 'Warning message')" icon="warning" iconPosition="left">Warning</amw-button>
                            <amw-button appearance="text" (click)="messagingService.error('Error', 'Error message')" icon="error" iconPosition="left">Error</amw-button>
                          </div>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Observable Subscription</h4>
                        <pre><code>{{ messagingServiceCodeExamples.observable }}</code></pre>
                        <div class="preview">
                          <p>Current message count: {{ messages.length }}</p>
                          <amw-button appearance="elevated" color="accent" (click)="messagingService.info('Test', 'Observe the count change')">
                            Add Message
                          </amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Custom Options</h4>
                        <pre><code>{{ messagingServiceCodeExamples.options }}</code></pre>
                        <div class="preview">
                          <amw-button appearance="elevated" color="primary" (click)="messagingService.info('Custom', 'This message has a 10 second duration', { duration: 10000 })">
                            Show Custom Message
                          </amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Message Management</h4>
                        <pre><code>{{ messagingServiceCodeExamples.management }}</code></pre>
                        <div class="preview">
                          <div class="button-group">
                            <amw-button appearance="text" (click)="clearMessages()" icon="clear_all" iconPosition="left">Clear All</amw-button>
                            <amw-button appearance="text" (click)="messagingService.clearMessagesByType('warning')">
                              Clear Warnings
                            </amw-button>
                          </div>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Advanced Usage with Actions</h4>
                        <pre><code>{{ messagingServiceCodeExamples.advanced }}</code></pre>
                        <div class="preview">
                          <p>This example shows a message with custom action buttons (see code)</p>
                        </div>
                      </div>
                    </div>
                  }
                  @case ('loading') {
                    <div class="loading-code-examples">
                      <h3>Loading Service Code Examples</h3>
                      <p>Interactive examples showing different loading service configurations.</p>

                      <div class="code-example">
                        <h4>Basic Usage</h4>
                        <pre><code>{{ loadingServiceCodeExamples.basic }}</code></pre>
                        <div class="preview">
                          <amw-button appearance="elevated" color="primary" (click)="startLoading()" [disabled]="loadingState.isLoading" icon="hourglass_empty" iconPosition="left">Start Loading</amw-button>
                          <amw-button appearance="text" (click)="stopLoading()" [disabled]="!loadingState.isLoading">
                            Stop Loading
                          </amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>HTTP Request Pattern</h4>
                        <pre><code>{{ loadingServiceCodeExamples.httpRequest }}</code></pre>
                        <div class="preview">
                          <p>Common pattern for HTTP requests with automatic cleanup using finalize operator</p>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Progress Indicator</h4>
                        <pre><code>{{ loadingServiceCodeExamples.progress }}</code></pre>
                        <div class="preview">
                          <amw-input
                            label="Progress"
                            type="number"
                            [(ngModel)]="loadingProgress"
                            appearance="outline"
                            [min]="0"
                            [max]="100"
                            style="width: 200px;">
                          </amw-input>
                          <amw-button appearance="text" (click)="updateLoadingProgress()" [disabled]="!loadingState.isLoading">
                            Update Progress
                          </amw-button>
                          @if (loadingState.isLoading && loadingState.progress !== undefined) {
                            <p>Current progress: {{ loadingState.progress }}%</p>
                          }
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Observable Subscription</h4>
                        <pre><code>{{ loadingServiceCodeExamples.observable }}</code></pre>
                        <div class="preview">
                          <p>Loading: {{ loadingState.isLoading }}</p>
                          @if (loadingState.message) {
                            <p>Message: {{ loadingState.message }}</p>
                          }
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Multiple Concurrent Loading States</h4>
                        <pre><code>{{ loadingServiceCodeExamples.multiple }}</code></pre>
                        <div class="preview">
                          <p>This example shows how to manage multiple loading operations simultaneously</p>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Dynamic Message Updates</h4>
                        <pre><code>{{ loadingServiceCodeExamples.dynamic }}</code></pre>
                        <div class="preview">
                          <amw-input
                            label="Loading Message"
                            [(ngModel)]="loadingMessage"
                            appearance="outline"
                            style="width: 300px;">
                          </amw-input>
                          <amw-button appearance="text" (click)="updateLoadingMessage()" [disabled]="!loadingState.isLoading">
                            Update Message
                          </amw-button>
                        </div>
                      </div>
                    </div>
                  }
                  @case ('notification') {
                    <div class="notification-code-examples">
                      <h3>Notification Service Code Examples</h3>
                      <p>Interactive examples showing different notification service configurations.</p>

                      <div class="code-example">
                        <h4>Basic Usage</h4>
                        <pre><code>{{ notificationServiceCodeExamples.basic }}</code></pre>
                        <div class="preview">
                          <amw-button appearance="elevated" color="primary" (click)="showNotification()" icon="notifications" iconPosition="left">Show Notification</amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Notification Types</h4>
                        <pre><code>{{ notificationServiceCodeExamples.types }}</code></pre>
                        <div class="preview">
                          <div class="button-group">
                            <amw-button appearance="text" (click)="notificationService.info('Info', 'Information notification')" icon="info" iconPosition="left">Info</amw-button>
                            <amw-button appearance="text" (click)="notificationService.success('Success', 'Success notification')" icon="check_circle" iconPosition="left">Success</amw-button>
                            <amw-button appearance="text" (click)="notificationService.warning('Warning', 'Warning notification')" icon="warning" iconPosition="left">Warning</amw-button>
                            <amw-button appearance="text" (click)="notificationService.error('Error', 'Error notification')" icon="error" iconPosition="left">Error</amw-button>
                          </div>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Custom Options</h4>
                        <pre><code>{{ notificationServiceCodeExamples.options }}</code></pre>
                        <div class="preview">
                          <amw-button appearance="elevated" color="primary" (click)="notificationService.info('Custom', 'Custom notification with 10s duration', { duration: 10000, sound: true })">
                            Show Custom Notification
                          </amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Persistent Notification</h4>
                        <pre><code>{{ notificationServiceCodeExamples.persistent }}</code></pre>
                        <div class="preview">
                          <amw-button appearance="elevated" color="warn" (click)="notificationService.warning('Important', 'This requires manual dismissal', { persistent: true, duration: 0 })">
                            Show Persistent Notification
                          </amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Observable Subscription</h4>
                        <pre><code>{{ notificationServiceCodeExamples.observable }}</code></pre>
                        <div class="preview">
                          <p>Active notifications: {{ notifications.length }}</p>
                          <amw-button appearance="text" (click)="clearNotifications()" icon="clear_all" iconPosition="left">Clear All</amw-button>
                        </div>
                      </div>

                      <div class="code-example">
                        <h4>Browser Notifications</h4>
                        <pre><code>{{ notificationServiceCodeExamples.browser }}</code></pre>
                        <div class="preview">
                          <p>This example shows how to request permission and show native browser notifications</p>
                        </div>
                      </div>
                    </div>
                  }
                }
              </div>
            </amw-tab>

            <amw-tab label="API" icon="description">
              <div class="api-content">
                @switch (selectedService.id) {
                  @case ('messaging') {
                    <amw-api-doc
                      componentName="Messaging Service"
                      [apiDocumentation]="messagingServiceApiDoc"
                      description="Complete reference for the AmwMessagingService methods and properties.">
                    </amw-api-doc>
                  }
                  @case ('loading') {
                    <amw-api-doc
                      componentName="Loading Service"
                      [apiDocumentation]="loadingServiceApiDoc"
                      description="Complete reference for the AmwLoadingService methods and properties.">
                    </amw-api-doc>
                  }
                  @case ('notification') {
                    <amw-api-doc
                      componentName="Notification Service"
                      [apiDocumentation]="notificationServiceApiDoc"
                      description="Complete reference for the AmwNotificationService methods and properties.">
                    </amw-api-doc>
                  }
                }
              </div>
            </amw-tab>
          </amw-tabs>
        </ng-template>
</amw-card>
    </div>
  </div>
</div>
